-- LIMS 测试数据脚本
-- 在所有建表脚本执行后运行

USE lims;

-- ============================================
-- 客户单位测试数据
-- ============================================
INSERT INTO biz_client (name, contact_person, contact_phone, email, address, tax_id, status) VALUES
('中建三局集团有限公司', '张建国', '027-85678901', 'zjg@cscec.com', '湖北省武汉市武昌区和平大道', '91420100177779797X', 'approved'),
('万科企业股份有限公司', '李明', '0755-25606666', 'liming@vanke.com', '广东省深圳市盐田区大梅沙环梅路', '91440300192429843M', 'approved'),
('碧桂园控股有限公司', '王芳', '0757-26677777', 'wangfang@bgy.com.cn', '广东省佛山市顺德区北滘镇', '91440606617209047U', 'approved'),
('中国铁建股份有限公司', '赵强', '010-52688888', 'zhaoqiang@crcc.cn', '北京市海淀区复兴路40号', '91110000100018988H', 'approved'),
('上海建工集团股份有限公司', '陈丽', '021-64390000', 'chenli@scg.com.cn', '上海市徐汇区龙吴路3000号', '91310000132200070X', 'approved'),
('绿地控股集团股份有限公司', '刘伟', '021-60606666', 'liuwei@greenland.com.cn', '上海市黄浦区河南中路', '913100001322000708', 'approved'),
('保利发展控股集团股份有限公司', '周敏', '020-83883333', 'zhoumin@polycn.com', '广东省广州市海珠区阅江中路', '91440000190352107B', 'approved'),
('华润置地有限公司', '吴涛', '0755-82839999', 'wutao@crland.com.cn', '广东省深圳市南山区科技园', '91440300618828467Q', 'pending');

-- ============================================
-- 委托单测试数据
-- ============================================
INSERT INTO biz_entrustment (entrustment_no, client_id, client_name, contact_person, contact_phone, sample_date, follower, follower_id, sample_name, sample_model, sample_material, sample_quantity, is_sample_return, test_items, estimated_amount, expected_date, status) VALUES
('WT202412050001', 1, '中建三局集团有限公司', '张建国', '027-85678901', '2024-12-01', '李检测', 3, 'C30混凝土试块', '150×150×150mm', '混凝土', 9, 0, '抗压强度,抗折强度', 1800.00, '2024-12-15', 'approved'),
('WT202412050002', 2, '万科企业股份有限公司', '李明', '0755-25606666', '2024-12-02', '王实验', 3, 'HRB400钢筋', 'Φ16', 'Q235钢', 6, 1, '拉伸试验,弯曲试验', 2400.00, '2024-12-16', 'testing'),
('WT202412050003', 3, '碧桂园控股有限公司', '王芳', '0757-26677777', '2024-12-03', '李检测', 3, '水泥', 'P.O 42.5', '硅酸盐水泥', 3, 0, '细度,凝结时间,安定性,强度', 3200.00, '2024-12-17', 'testing'),
('WT202412050004', 4, '中国铁建股份有限公司', '赵强', '010-52688888', '2024-12-03', '张分析', 3, '砂浆试块', 'M10', '水泥砂浆', 6, 0, '抗压强度', 1200.00, '2024-12-18', 'approved'),
('WT202412050005', 5, '上海建工集团股份有限公司', '陈丽', '021-64390000', '2024-12-04', '王实验', 3, '防水卷材', 'SBS改性沥青', 'SBS', 5, 1, '拉伸性能,不透水性,耐热性', 2800.00, '2024-12-19', 'pending');

-- ============================================
-- 样品测试数据
-- ============================================
INSERT INTO biz_sample (sample_no, entrustment_id, entrustment_no, name, spec, material, quantity, unit, receipt_date, receipt_person, receipt_person_id, storage_location, status) VALUES
('YP202412050001', 1, 'WT202412050001', 'C30混凝土试块-1', '150×150×150mm', '混凝土', 3, '组', '2024-12-01', '李检测', 3, 'A区-01架', 'testing'),
('YP202412050002', 1, 'WT202412050001', 'C30混凝土试块-2', '150×150×150mm', '混凝土', 3, '组', '2024-12-01', '李检测', 3, 'A区-01架', 'testing'),
('YP202412050003', 1, 'WT202412050001', 'C30混凝土试块-3', '150×150×150mm', '混凝土', 3, '组', '2024-12-01', '李检测', 3, 'A区-01架', 'pending'),
('YP202412050004', 2, 'WT202412050002', 'HRB400钢筋-1', 'Φ16', 'Q235钢', 2, '根', '2024-12-02', '王实验', 3, 'B区-03架', 'testing'),
('YP202412050005', 2, 'WT202412050002', 'HRB400钢筋-2', 'Φ16', 'Q235钢', 2, '根', '2024-12-02', '王实验', 3, 'B区-03架', 'testing'),
('YP202412050006', 2, 'WT202412050002', 'HRB400钢筋-3', 'Φ16', 'Q235钢', 2, '根', '2024-12-02', '王实验', 3, 'B区-03架', 'pending'),
('YP202412050007', 3, 'WT202412050003', '水泥样品-1', 'P.O 42.5', '硅酸盐水泥', 1, 'kg', '2024-12-03', '李检测', 3, 'C区-05架', 'testing'),
('YP202412050008', 3, 'WT202412050003', '水泥样品-2', 'P.O 42.5', '硅酸盐水泥', 1, 'kg', '2024-12-03', '李检测', 3, 'C区-05架', 'testing'),
('YP202412050009', 3, 'WT202412050003', '水泥样品-3', 'P.O 42.5', '硅酸盐水泥', 1, 'kg', '2024-12-03', '李检测', 3, 'C区-05架', 'pending'),
('YP202412050010', 4, 'WT202412050004', 'M10砂浆试块-1', 'M10', '水泥砂浆', 3, '组', '2024-12-03', '张分析', 3, 'A区-02架', 'testing'),
('YP202412050011', 4, 'WT202412050004', 'M10砂浆试块-2', 'M10', '水泥砂浆', 3, '组', '2024-12-03', '张分析', 3, 'A区-02架', 'pending'),
('YP202412050012', 5, 'WT202412050005', 'SBS防水卷材-1', 'SBS改性沥青', 'SBS', 2, 'm²', '2024-12-04', '王实验', 3, 'D区-07架', 'pending');

-- ============================================
-- 检测任务测试数据
-- ============================================
INSERT INTO biz_test_task (task_no, sample_id, sample_no, sample_name, entrustment_id, entrustment_no, parameters, test_method, test_standard, assignee_id, assignee, assign_date, due_date, device_id, device_name, progress, priority, status) VALUES
('RW202412050001', 1, 'YP202412050001', 'C30混凝土试块-1', 1, 'WT202412050001', '["抗压强度"]', 'GB/T 50081-2019', 'GB/T 50081-2019', 3, '李检测', '2024-12-01', '2024-12-10', 1, '压力试验机YAW-3000', 60, 'normal', 'in_progress'),
('RW202412050002', 2, 'YP202412050002', 'C30混凝土试块-2', 1, 'WT202412050001', '["抗压强度"]', 'GB/T 50081-2019', 'GB/T 50081-2019', 3, '李检测', '2024-12-01', '2024-12-10', 1, '压力试验机YAW-3000', 30, 'normal', 'in_progress'),
('RW202412050003', 4, 'YP202412050004', 'HRB400钢筋-1', 2, 'WT202412050002', '["拉伸试验","屈服强度","抗拉强度","伸长率"]', 'GB/T 228.1-2010', 'GB/T 1499.2-2018', 3, '王实验', '2024-12-02', '2024-12-11', 2, '万能试验机WAW-1000', 80, 'urgent', 'in_progress'),
('RW202412050004', 5, 'YP202412050005', 'HRB400钢筋-2', 2, 'WT202412050002', '["拉伸试验","屈服强度","抗拉强度","伸长率"]', 'GB/T 228.1-2010', 'GB/T 1499.2-2018', 3, '王实验', '2024-12-02', '2024-12-11', 2, '万能试验机WAW-1000', 100, 'urgent', 'completed'),
('RW202412050005', 7, 'YP202412050007', '水泥样品-1', 3, 'WT202412050003', '["细度"]', 'GB/T 1345-2005', 'GB 175-2007', 3, '李检测', '2024-12-03', '2024-12-12', 3, '负压筛析仪FYS-150', 100, 'normal', 'completed'),
('RW202412050006', 8, 'YP202412050008', '水泥样品-2', 3, 'WT202412050003', '["凝结时间"]', 'GB/T 1346-2011', 'GB 175-2007', 3, '李检测', '2024-12-03', '2024-12-12', 4, '水泥凝结时间测定仪', 50, 'normal', 'in_progress'),
('RW202412050007', 10, 'YP202412050010', 'M10砂浆试块-1', 4, 'WT202412050004', '["抗压强度"]', 'JGJ/T 70-2009', 'JGJ/T 98-2010', 3, '张分析', '2024-12-03', '2024-12-13', 1, '压力试验机YAW-3000', 20, 'normal', 'in_progress');

-- ============================================
-- 设备测试数据
-- ============================================
INSERT INTO biz_device (code, name, model, manufacturer, serial_number, asset_type, status, location, department, purchase_date, commissioning_date, next_calibration_date, responsible_person, responsible_person_id, utilization, operating_hours) VALUES
('SB202401001', '压力试验机YAW-3000', 'YAW-3000', '济南试金集团有限公司', 'YAW3000-20240101', 'instrument', 'running', '力学实验室-A区', '检测部', '2024-01-15', '2024-01-20', '2025-01-20', '李检测', 3, 75.50, 1250.00),
('SB202401002', '万能试验机WAW-1000', 'WAW-1000', '上海华龙测试仪器有限公司', 'WAW1000-20240102', 'instrument', 'running', '力学实验室-B区', '检测部', '2024-01-18', '2024-01-22', '2025-01-22', '王实验', 3, 82.30, 1580.00),
('SB202401003', '负压筛析仪FYS-150', 'FYS-150', '无锡建仪仪器机械有限公司', 'FYS150-20240103', 'instrument', 'running', '化学实验室-C区', '检测部', '2024-02-01', '2024-02-05', '2025-02-05', '李检测', 3, 45.20, 680.00),
('SB202401004', '水泥凝结时间测定仪', 'ISO-9597', '沧州科兴仪器设备有限公司', 'ISO9597-20240104', 'instrument', 'running', '化学实验室-C区', '检测部', '2024-02-10', '2024-02-15', '2025-02-15', '张分析', 3, 38.60, 520.00),
('SB202401005', '电子天平', 'BSA224S', '赛多利斯科学仪器(北京)有限公司', 'BSA224S-20240105', 'instrument', 'running', '化学实验室-D区', '检测部', '2024-03-01', '2024-03-05', '2025-03-05', '李检测', 3, 92.10, 2150.00),
('SB202401006', '恒温恒湿养护箱', 'SHBY-40B', '上海博珍仪器设备制造厂', 'SHBY40B-20240106', 'device', 'running', '养护室', '检测部', '2024-03-15', '2024-03-20', '2025-03-20', '王实验', 3, 88.50, 2080.00),
('SB202401007', '混凝土搅拌机', 'HJW-60', '献县鹏翼建筑仪器厂', 'HJW60-20240107', 'device', 'running', '制样室', '检测部', '2024-04-01', '2024-04-05', '2025-04-05', '张分析', 3, 55.30, 890.00),
('SB202401008', '钢筋弯曲试验机', 'GW-40B', '济南中创工业测试系统有限公司', 'GW40B-20240108', 'instrument', 'maintenance', '力学实验室-B区', '检测部', '2024-04-20', '2024-04-25', '2025-04-25', '王实验', 3, 0.00, 1320.00),
('SB202401009', '标准养护室温湿度控制仪', 'BWYS-II', '河北大宏实验仪器有限公司', 'BWYSII-20240109', 'device', 'running', '养护室', '检测部', '2024-05-10', '2024-05-15', '2025-05-15', '李检测', 3, 95.80, 3200.00),
('SB202401010', '混凝土抗渗仪', 'HP-4.0', '沧州路仪公路仪器有限公司', 'HP40-20240110', 'instrument', 'idle', '力学实验室-A区', '检测部', '2024-06-01', '2024-06-05', '2025-06-05', '张分析', 3, 12.50, 180.00);

-- ============================================
-- 合同测试数据
-- ============================================
INSERT INTO biz_contract (contract_no, name, client_id, client_name, entrustment_id, entrustment_no, contract_type, amount, paid_amount, sign_date, start_date, end_date, status) VALUES
('HT202412050001', '2024年度检测服务合同', 1, '中建三局集团有限公司', 1, 'WT202412050001', 'yearly', 50000.00, 20000.00, '2024-01-01', '2024-01-01', '2024-12-31', 'active'),
('HT202412050002', '钢筋检测服务合同', 2, '万科企业股份有限公司', 2, 'WT202412050002', 'single', 2400.00, 0.00, '2024-12-02', '2024-12-02', '2024-12-31', 'active'),
('HT202412050003', '水泥检测框架合同', 3, '碧桂园控股有限公司', 3, 'WT202412050003', 'framework', 100000.00, 30000.00, '2024-06-01', '2024-06-01', '2025-05-31', 'active');

-- ============================================
-- 报价单测试数据
-- ============================================
INSERT INTO biz_quotation (quotation_no, client_id, client_name, contact_person, phone, total_amount, discount_amount, actual_amount, valid_until, items, status, creator_id, creator) VALUES
('BJ202412050001', 1, '中建三局集团有限公司', '张建国', '027-85678901', 2000.00, 200.00, 1800.00, '2024-12-31', '[{"name":"混凝土抗压强度","quantity":9,"unitPrice":200,"amount":1800}]', 'approved', 1, 'admin'),
('BJ202412050002', 2, '万科企业股份有限公司', '李明', '0755-25606666', 2500.00, 100.00, 2400.00, '2024-12-31', '[{"name":"钢筋拉伸试验","quantity":6,"unitPrice":400,"amount":2400}]', 'approved', 1, 'admin'),
('BJ202412050003', 3, '碧桂园控股有限公司', '王芳', '0757-26677777', 3500.00, 300.00, 3200.00, '2024-12-31', '[{"name":"水泥全套检测","quantity":3,"unitPrice":1000,"amount":3000}]', 'approved', 1, 'admin'),
('BJ202412050004', 6, '绿地控股集团股份有限公司', '刘伟', '021-60606666', 5000.00, 0.00, 5000.00, '2024-12-31', '[{"name":"混凝土配合比设计","quantity":1,"unitPrice":5000,"amount":5000}]', 'submitted', 1, 'admin'),
('BJ202412050005', 7, '保利发展控股集团股份有限公司', '周敏', '020-83883333', 8000.00, 500.00, 7500.00, '2024-12-31', '[{"name":"综合检测服务","quantity":1,"unitPrice":8000,"amount":8000}]', 'draft', 1, 'admin');

-- ============================================
-- 委外订单测试数据
-- ============================================
INSERT INTO biz_outsource_order (order_no, supplier_id, supplier_name, entrustment_id, entrustment_no, outsource_type, items, amount, expected_date, status, creator_id, creator) VALUES
('WW202412050001', 1, '国家建筑材料测试中心', 3, 'WT202412050003', 'parameter', '["氯离子含量检测"]', 1500.00, '2024-12-20', 'approved'),
('WW202412050002', 2, '省级质量监督检测院', 5, 'WT202412050005', 'order', '["防水卷材全套检测"]', 3500.00, '2024-12-25', 'pending');

-- ============================================
-- 检测报告测试数据
-- ============================================
INSERT INTO biz_test_report (report_no, entrustment_id, entrustment_no, sample_id, sample_no, sample_name, task_id, task_no, client_name, test_items, test_results, conclusion, tester_id, tester, status) VALUES
('BG202412050001', 2, 'WT202412050002', 5, 'YP202412050005', 'HRB400钢筋-2', 4, 'RW202412050004', '万科企业股份有限公司', '["拉伸试验","屈服强度","抗拉强度","伸长率"]', '[{"parameterName":"屈服强度","result":"435","unit":"MPa","conclusion":"合格"},{"parameterName":"抗拉强度","result":"610","unit":"MPa","conclusion":"合格"},{"parameterName":"伸长率","result":"18.5","unit":"%","conclusion":"合格"}]', '所有检测项目均符合标准要求', 3, '王实验', 'pending_review'),
('BG202412050002', 3, 'WT202412050003', 7, 'YP202412050007', '水泥样品-1', 5, 'RW202412050005', '碧桂园控股有限公司', '["细度"]', '[{"parameterName":"细度(80μm筛余)","result":"1.8","unit":"%","conclusion":"合格"}]', '细度检测合格', 3, '李检测', 'reviewed');

-- ============================================
-- 测试数据录入记录
-- ============================================
INSERT INTO biz_test_data (task_id, task_no, sample_id, sample_no, parameter_name, test_value, test_unit, test_result, conclusion, device_id, device_name, temperature, humidity, operator_id, operator, status) VALUES
(4, 'RW202412050004', 5, 'YP202412050005', '屈服强度', '{"value1":"432","value2":"438","value3":"435"}', 'MPa', '435', '合格', 2, '万能试验机WAW-1000', 23.5, 55.0, 3, '王实验', 'approved'),
(4, 'RW202412050004', 5, 'YP202412050005', '抗拉强度', '{"value1":"608","value2":"612","value3":"610"}', 'MPa', '610', '合格', 2, '万能试验机WAW-1000', 23.5, 55.0, 3, '王实验', 'approved'),
(4, 'RW202412050004', 5, 'YP202412050005', '伸长率', '{"value1":"18.2","value2":"18.8","value3":"18.5"}', '%', '18.5', '合格', 2, '万能试验机WAW-1000', 23.5, 55.0, 3, '王实验', 'approved'),
(5, 'RW202412050005', 7, 'YP202412050007', '细度', '{"筛余量":"0.36g","试样量":"20g"}', '%', '1.8', '合格', 3, '负压筛析仪FYS-150', 22.0, 60.0, 3, '李检测', 'approved');

-- ============================================
-- 更多用户数据
-- ============================================
INSERT INTO sys_user (username, password, real_name, email, phone, dept_id, status) VALUES
('labmanager', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iKs5gE6Q0nP1N9I4s7w4m7kT.KQ.', '张主管', 'labmanager@lims.com', '13800138001', 2, 1),
('tester1', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iKs5gE6Q0nP1N9I4s7w4m7kT.KQ.', '李检测', 'tester1@lims.com', '13800138002', 2, 1),
('tester2', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iKs5gE6Q0nP1N9I4s7w4m7kT.KQ.', '王实验', 'tester2@lims.com', '13800138003', 2, 1),
('tester3', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iKs5gE6Q0nP1N9I4s7w4m7kT.KQ.', '张分析', 'tester3@lims.com', '13800138004', 2, 1),
('sales1', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iKs5gE6Q0nP1N9I4s7w4m7kT.KQ.', '赵销售', 'sales1@lims.com', '13800138005', 3, 1),
('finance1', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iKs5gE6Q0nP1N9I4s7w4m7kT.KQ.', '钱财务', 'finance1@lims.com', '13800138006', 4, 1);

-- 关联用户角色
INSERT INTO sys_user_role (user_id, role_id) VALUES
(2, 2),  -- labmanager -> lab_manager
(3, 3),  -- tester1 -> tester
(4, 3),  -- tester2 -> tester
(5, 3),  -- tester3 -> tester
(6, 4),  -- sales1 -> sales
(7, 5);  -- finance1 -> finance
